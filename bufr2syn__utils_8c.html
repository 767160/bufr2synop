<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>bufr2synop: src/libraries/bufr2syn_utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bufr2synop
   &#160;<span id="projectnumber">0.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_588cd77586230d2c129f15f0bca2b9b2.html">libraries</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bufr2syn_utils.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>file with the utility routines for binary bufr2synop  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bufr2syn_8h_source.html">bufr2syn.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bufr2syn_utils.c:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c__incl.png" border="0" usemap="#src_2libraries_2bufr2syn__utils_8c" alt=""/></div>
<map name="src_2libraries_2bufr2syn__utils_8c" id="src_2libraries_2bufr2syn__utils_8c">
<area shape="rect" id="node3" href="bufr2syn_8h.html" title="bufr2syn.h" alt="" coords="343,96,421,123"/><area shape="rect" id="node19" href="metsynop_8h.html" title="Main header file for synop related tasks. " alt="" coords="621,171,707,197"/><area shape="rect" id="node21" href="metbuoy_8h.html" title="Main header file for buoy related tasks. " alt="" coords="731,171,812,197"/></map>
</div>
</div>
<p><a href="bufr2syn__utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aca5951fa477d55a17c610f7c10cdd18a"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#aca5951fa477d55a17c610f7c10cdd18a">three_bytes_to_uint</a> (const unsigned char *source)</td></tr>
<tr class="memdesc:aca5951fa477d55a17c610f7c10cdd18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the integer value from an array of three bytes, most significant first  <a href="#aca5951fa477d55a17c610f7c10cdd18a">More...</a><br/></td></tr>
<tr class="separator:aca5951fa477d55a17c610f7c10cdd18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4beba3db514cc374360aa9042ad482"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#a3d4beba3db514cc374360aa9042ad482">integer_to_descriptor</a> (struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *d, int id)</td></tr>
<tr class="memdesc:a3d4beba3db514cc374360aa9042ad482"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse an integer with a descriptor fom bufr ECWMF libary  <a href="#a3d4beba3db514cc374360aa9042ad482">More...</a><br/></td></tr>
<tr class="separator:a3d4beba3db514cc374360aa9042ad482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#a956ace90c24f7bf3a0d9cf842ee4e89c">charray_to_string</a> (char *s, unsigned char *buf, size_t size)</td></tr>
<tr class="memdesc:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a null termitated c-string from an array of unsigned chars  <a href="#a956ace90c24f7bf3a0d9cf842ee4e89c">More...</a><br/></td></tr>
<tr class="separator:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2876bb9983e34caf17a366a41e25ce9b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#a2876bb9983e34caf17a366a41e25ce9b">adjust_string</a> (char *s)</td></tr>
<tr class="memdesc:a2876bb9983e34caf17a366a41e25ce9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Supress trailing blanks of a string.  <a href="#a2876bb9983e34caf17a366a41e25ce9b">More...</a><br/></td></tr>
<tr class="separator:a2876bb9983e34caf17a366a41e25ce9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef4777dfa46d3929577005a97abc3f6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a> (char *tk[], size_t ntk, char *target, size_t len, char *blanks)</td></tr>
<tr class="memdesc:a4ef4777dfa46d3929577005a97abc3f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split the report string into tokens.  <a href="#a4ef4777dfa46d3929577005a97abc3f6">More...</a><br/></td></tr>
<tr class="separator:a4ef4777dfa46d3929577005a97abc3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb0b1348d967dccdf492c088172e36a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#aaeb0b1348d967dccdf492c088172e36a">YYYYMMDDHHmm_to_met_datetime</a> (struct <a class="el" href="structmet__datetime.html">met_datetime</a> *t, const char *source)</td></tr>
<tr class="memdesc:aaeb0b1348d967dccdf492c088172e36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the string YYYYMMDDHHmm and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>.  <a href="#aaeb0b1348d967dccdf492c088172e36a">More...</a><br/></td></tr>
<tr class="separator:aaeb0b1348d967dccdf492c088172e36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1432202487dc3d91032202440d793694"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2syn__utils_8c.html#a1432202487dc3d91032202440d793694">guess_gts_header</a> (struct <a class="el" href="structgts__header.html">gts_header</a> *h, const char *f)</td></tr>
<tr class="memdesc:a1432202487dc3d91032202440d793694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guess the WMO GTS header from filename.  <a href="#a1432202487dc3d91032202440d793694">More...</a><br/></td></tr>
<tr class="separator:a1432202487dc3d91032202440d793694"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>file with the utility routines for binary bufr2synop </p>

<p>Definition in file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2876bb9983e34caf17a366a41e25ce9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* adjust_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Supress trailing blanks of a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>string to process </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00074">74</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2syn__x01_8c_source.html#l00109">buoy_parse_x01()</a>, and <a class="el" href="bufr2syn__x01_8c_source.html#l00034">syn_parse_x01()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <span class="keywordtype">size_t</span> l;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   l = strlen(s);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <span class="keywordflow">while</span> (l &amp;&amp; s[--l] == <span class="charliteral">&#39; &#39;</span>) </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;     s[l] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph" id="bufr2syn__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph">
<area shape="rect" id="node3" href="bufr2syn__x01_8c.html#acb3bbf3a22b9538856bc8600a8e059af" title="Parse a expanded descriptor with X = 01. " alt="" coords="149,5,264,32"/><area shape="rect" id="node11" href="bufr2syn__x01_8c.html#a45f5792feb03c19b863362d0bc6d31af" title="Parse a expanded descriptor with X = 01. " alt="" coords="153,56,260,83"/><area shape="rect" id="node5" href="bufr2syn__buoy_8c.html#a0ead25d81eb64a65e61fcc77ceae0285" title="parse_subset_as_buoy" alt="" coords="315,5,466,32"/><area shape="rect" id="node7" href="bufr2syn__sqparse_8c.html#a7e093a8faf8eb358ee8913479497f7fc" title="parse_subset_sequence" alt="" coords="518,31,677,57"/><area shape="rect" id="node9" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="725,31,776,57"/><area shape="rect" id="node13" href="bufr2syn__synop_8c.html#a2fb7360821d4a5b604f5a1a54d94e4a0" title="parse_subset_as_synop" alt="" coords="312,56,469,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a956ace90c24f7bf3a0d9cf842ee4e89c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* charray_to_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get a null termitated c-string from an array of unsigned chars </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>resulting string </td></tr>
    <tr><td class="paramname">buf</td><td>pointer to first element in array </td></tr>
    <tr><td class="paramname">size</td><td>number of chars in array </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00060">60</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00188">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <span class="comment">// copy</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   memcpy(s , buf, size);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <span class="comment">// add final string mark</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   s[size] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph" id="bufr2syn__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph">
<area shape="rect" id="node3" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="173,5,224,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1432202487dc3d91032202440d793694"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int guess_gts_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgts__header.html">gts_header</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guess the WMO GTS header from filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>pointer to a struct <a class="el" href="structgts__header.html">gts_header</a> where to set the results </td></tr>
    <tr><td class="paramname">f</td><td>pathname of bufrfile</td></tr>
  </table>
  </dd>
</dl>
<p>It returns 1 if guessed, 0 otherwise</p>
<pre>
This routine assume the filename format of a bufr file is</pre><pre>  YYYYMMDDHHmmss_BULLNN_ICAO_YYGGgg_ORD.bufr</pre><pre>where</pre><pre> YYYYMMDDHHmmss</pre><pre>is the timestamp (UTC) of the file in GTS (as example, in NOAA gateway)</pre><pre>BULLNN is the bulletin identifier in GTS. It is a six chars lenght in the form T1 T2 A1 A2 N1 N2</pre><pre>  For observations, T1 is 'I'
  Possible values of T2 for T1 = 'I' are
     O   Oceanographic/limnographic (water properties)
     P   Pictorial
     S   Surface/sea level
     T   Text (plain language information)
     U   Upper air
     X   Other data types
     Z   Mixed data types</pre><pre>  For T1T2 = 'IS' Then A1:</pre><pre>     IS A 01–29 Routinely scheduled observations for n/a 000/006
                distribution from automatic (fixed or mobile)
                land stations (e.g. 0000, 0100, … or 0220, 0240,
                0300, …, or 0715, 0745, ... UTC)
     IS A 30–59 N-minute observations from automatic (fixed n/a 000/007
                or mobile) land stations
     IS B   Radar reports (parts A and B) RADOB 006/003
     IS C 01–45 Climatic observations from land stations CLIMAT 000/020
     IS C 46–59 Climatic observations from marine stations CLIMAT SHIP 001/0202009 edition
                ATTACHmENT II-5 I
     IS D   Radiological observation RADREP 010/001
     IS E   Ozone measurement at surface n/a 008/000
     IS F   Source of atmospherics SFAZI, SFLOC, SFAZU 000/030
     IS I 01–45 Intermediate synoptic observations from fixed SYNOP (SIxx) 000/001
            land stations 000/051
     IS I 46–59 Intermediate synoptic observations from mobile SYNOP mOBIL 000/004
            land stations
     IS M 01–45 Main synoptic observations from fixed land SYNOP (SMxx) 000/002
            stations 000/052
     IS M 46–59 Main synoptic observations from mobile land SYNOP mOBIL 000/005
             stations
     IS N 01–45 Synoptic observations from fixed land stations SYNOP (SNxx) 000/000
            at non-standard time (i.e. 0100, 0200, 0400,   000/050
            0500, ... UTC)
     IS N 46–59 Synoptic observations from mobile land stations SYNOP mOBIL 000/003
            at non-standard time (i.e. 0100, 0200, 0400,
            0500, ... UTC)
     IS R   Hydrologic reports HYDRA 000/040
     IS S 01–19 Synoptic observations from marine stations SHIP 001/000
     IS S 20–39 One-hour observations from automatic marine n/a 001/006
           stations
     IS S 40–59 N-minute observations from automatic marine n/a 001/007
           stations
     IS T 01–19 Tide gauge observations n/a 001/030
     IS T 20–39 Observed water level time series n/a 001/031
     IS V   Special aeronautical observations (SPECI) SPECI 000/011
     IS W   Aviation routine weather observations (mETAR) mETAR 000/010
     IS X   Other surface data IAC, IAC FLEET</pre><pre>  For T1T2 = 'IU'  then A1:
     IU A   Single level aircraft reports (automatic) AmDAR 004/000
     IU A   Single level aircraft reports (manual) AIREP/PIREP 004/001
     IU B   Single level balloon reports n/a
     IU C   (used for single level satellite-derived SAREP/SATOB 005/000
             reports – see Note 3)
     IU D   Dropsonde/Dropwindsondes TEmP DROP 002/007
     IU E   Ozone vertical sounding n/a 008/001
     IU I   Dispersal and transport analysis n/a 009/000
     IU J 01–19 Upper wind from fixed land stations (entire PILOT (parts A, 002/001
            sounding) B, C, D)
     IU J 20–39 Upper wind from mobile land stations (entire PILOT mOBIL 002/003
            sounding) (parts A, B, C, D)
     IU J 40–59 Upper wind from marine stations (entire PILOT SHIP 002/002
           sounding) (parts A, B, C, D)
     IU K 01–19 Radio soundings from fixed land stations TEmP (parts A, B) 002/004
           (up to 100 hPa)
     IU K 20–39 Radio soundings from mobile land stations TEmP mOBIL 002/006
          (up to 100 hPa) (parts A, B)
     IU K 40–59 Radio soundings from marine stations TEmP SHIP (parts A, B) 002/005
           (up to 100 hPa)
     IU M   Model derived sondes
     IU N   Rocketsondes
     IU O   Profiles of aircraft observations in ascending/ AmDAR 002/020
            descending
     IU P   Profilers PILOT 002/010
     IU Q   RASS temperature profilers TEmP 002/011
     IU R   (used for radiance data – see Note 3)
     IU S   01–19 Radiosondes/pibal reports from fixed land TEmP (parts A, B, C, D) 002/004
             stations (entire sounding)
     IU S 20–39 Radio soundings from mobile land stations TEmP mOBIL (parts A, 002/006
             (entire sounding) B, C, D)
     IU S 40–59 Radio soundings from marine stations TEmP SHIP (parts A, 002/005
             (entire sounding) B, C, D)
     IU T   (used for satellite-derived sondes – see Note 3) SATEm, SARAD, SATOB
     IU U 01–45 Monthly statistics of data from upper-air stations CLImAT TEmP 002/025
     IU U 46–59 Monthly statistics of data from marine stations CLImAT TEmP, SHIP 002/026
     IU W 01–19 Upper wind from fixed land stations (up to PILOT (parts A, B) 002/001
             100 hPa)
     IU W 20–39 Upper wind from mobile land stations (up to PILOT mOBIL 002/003
             100 hPa) (parts A, B)
     IU W 40–59 Upper wind from marine stations (up to PILOT SHIP 002/002
             100 hPa) (parts A, B)
     IU X   Other upper-air reports</pre><pre>  for T1T2 = 'IO' then  A1:
     IO B   Buoy observations BUOY 001/025
     IO I   Sea ice
     IO P   Sub-surface profiling floats TESAC 031/004
     IO R   Sea surface observations TRACKOB 031/001
     IO S   Sea surface and below soundings BATHY, TESAC 031/005
     IO T   Sea surface temperature
     IO W   Sea surface waves WAVEOB 031/002
     IO X   Other sea environmental</pre><pre>  About A2 
     A   0 - 90W northern hemisphere
     B   90W - 180 northern hemisphere
     C   180 - 90E northern hemisphere
     D   90E - 0 northern hemisphere
     E   0 - 90W tropical belt
     F   90W - 180 tropical belt
     G   180 - 90E tropical belt
     H   90E - 0 tropical belt
     I   0 - 90W southern hemisphere
     J   90W - 180 southern hemisphere
     K   180 - 90E southern hemisphere
     L   90E - 0 southern hemisphere
     M   Lower left 10S 100E/upper right 70N 110W
     N   Northern hemisphere
     P   Area between 64.69N - 136.76W, 55.61N - 13.43W
     64.69N - 156.76W, 55.61N - 33.43W
     S   Southern hemisphere
     T   45W - 180 northern hemisphere
     U   Area between 21.0N - 128.1W, 36.0N - 130.9W
               21.1N - 113.0W, 36.2N - 110.5W
     V   Area between 30.3N - 83.7W, 51.0N - 68.9W
               19.8N - 64.5W, 33.3N - 47.1W
     X   Global Area (area not definable)</pre><pre> ICAO is the ICAO index for release center.</pre><pre> YYGGgg is the nominal release time (day, hour, minute) UTC</pre><pre> ORD is the order sequence as RRA, RRB, CCA .... is optional
</pre> 
<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00305">305</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>References <a class="el" href="bufr2syn_8h_source.html#l00331">gts_header::bname</a>, <a class="el" href="bufr2syn_8h_source.html#l00332">gts_header::center</a>, <a class="el" href="bufr2syn_8h_source.html#l00333">gts_header::dtrel</a>, <a class="el" href="bufr2syn_8h_source.html#l00335">gts_header::filename</a>, <a class="el" href="bufr2syn_8h_source.html#l00334">gts_header::order</a>, <a class="el" href="bufr2syn_8h_source.html#l00336">gts_header::timestamp</a>, and <a class="el" href="bufr2syn__utils_8c_source.html#l00096">tokenize_string()</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00188">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordtype">size_t</span> nt;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordtype">char</span> aux[256], *tk[16], *c;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="comment">// parse file name</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   strcpy(h-&gt;<a class="code" href="structgts__header.html#a69fa455b4bed72c1ff91ec6e399ca965">filename</a>, f);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   strcpy(aux, f);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="comment">// check latest &#39;/&#39; in filename</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordflow">if</span> ((c = strrchr(aux,<span class="charliteral">&#39;/&#39;</span>)) == NULL)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;     c = &amp;aux[0];</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;     c++;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   nt = <a class="code" href="bufr2syn__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a>(tk, 16, aux, strlen(c), <span class="stringliteral">&quot;_.&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="comment">// parse filenames with format as example &#39;AAAAMMDDHHmmss_ISIE06_SBBR_012100_RRB.bufr&#39;</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="comment">// 5 or 6 items </span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> ( nt &lt; 5 || nt &gt; 6)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="comment">// extension bufr</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keywordflow">if</span> (strcmp(tk[nt - 1],<span class="stringliteral">&quot;bufr&quot;</span>))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="comment">// item 0 the timestamp of file in NOAA GTS gateway</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordflow">if</span> (strlen(tk[0]) != 14 || strspn(tk[0], <span class="stringliteral">&quot;0123456789&quot;</span>) != 14)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   strcpy(h-&gt;<a class="code" href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">timestamp</a>, tk[0]);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <span class="comment">// item 1 </span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">if</span> (strlen(tk[1]) != 6 || strspn(&amp;tk[1][4],<span class="stringliteral">&quot;0123456789&quot;</span>) != 2)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   strcpy(h-&gt;<a class="code" href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">bname</a>, tk[1]);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="comment">// item 2</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">if</span> (strlen(tk[2]) != 4)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   strcpy(h-&gt;<a class="code" href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">center</a>, tk[2]);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">if</span> (strlen(tk[3]) != 6 || strspn(tk[3], <span class="stringliteral">&quot;0123456789&quot;</span>) != 6)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;     <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   strcpy(h-&gt;<a class="code" href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">dtrel</a>, tk[3]);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">if</span> (nt == 5)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      strcpy(h-&gt;<a class="code" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, <span class="stringliteral">&quot;BBB&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;     <span class="keywordflow">if</span> (strlen(tk[4]) == 3)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      strcpy(h-&gt;<a class="code" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, tk[4]);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;     <span class="keywordflow">else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}<div class="ttc" id="structgts__header_html_ab4f0ca0892d074656af878e227d802b0"><div class="ttname"><a href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">gts_header::timestamp</a></div><div class="ttdeci">char timestamp[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00336">bufr2syn.h:336</a></div></div>
<div class="ttc" id="structgts__header_html_a4b7aa0549fd269b056c6338343d29f12"><div class="ttname"><a href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">gts_header::order</a></div><div class="ttdeci">char order[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00334">bufr2syn.h:334</a></div></div>
<div class="ttc" id="structgts__header_html_a5a3261f82bdb971a89402298f58c0d54"><div class="ttname"><a href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">gts_header::bname</a></div><div class="ttdeci">char bname[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00331">bufr2syn.h:331</a></div></div>
<div class="ttc" id="structgts__header_html_a242f2fa9672b22db631d592283a8ae30"><div class="ttname"><a href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">gts_header::center</a></div><div class="ttdeci">char center[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00332">bufr2syn.h:332</a></div></div>
<div class="ttc" id="structgts__header_html_a2d6cac95fb647c857f524ba1b957de4e"><div class="ttname"><a href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">gts_header::dtrel</a></div><div class="ttdeci">char dtrel[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00333">bufr2syn.h:333</a></div></div>
<div class="ttc" id="bufr2syn__utils_8c_html_a4ef4777dfa46d3929577005a97abc3f6"><div class="ttname"><a href="bufr2syn__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a></div><div class="ttdeci">size_t tokenize_string(char *tk[], size_t ntk, char *target, size_t len, char *blanks)</div><div class="ttdoc">Split the report string into tokens. </div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn__utils_8c_source.html#l00096">bufr2syn_utils.c:96</a></div></div>
<div class="ttc" id="structgts__header_html_a69fa455b4bed72c1ff91ec6e399ca965"><div class="ttname"><a href="structgts__header.html#a69fa455b4bed72c1ff91ec6e399ca965">gts_header::filename</a></div><div class="ttdeci">char filename[256]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00335">bufr2syn.h:335</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_cgraph.png" border="0" usemap="#bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_cgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_cgraph" id="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_cgraph">
<area shape="rect" id="node3" href="bufr2syn__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6" title="Split the report string into tokens. " alt="" coords="179,5,287,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_icgraph" id="bufr2syn__utils_8c_a1432202487dc3d91032202440d793694_icgraph">
<area shape="rect" id="node3" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="179,5,229,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3d4beba3db514cc374360aa9042ad482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int integer_to_descriptor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse an integer with a descriptor fom bufr ECWMF libary </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>pointer to a struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> where to set the result on output </td></tr>
    <tr><td class="paramname">id</td><td>integer with the descriptor from ewcwf </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00042">42</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>References <a class="el" href="bufr2syn_8h_source.html#l00266">bufr_descriptor::c</a>, <a class="el" href="bufr2syn_8h_source.html#l00263">bufr_descriptor::f</a>, <a class="el" href="bufr2syn_8h_source.html#l00264">bufr_descriptor::x</a>, and <a class="el" href="bufr2syn_8h_source.html#l00265">bufr_descriptor::y</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00188">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;   <span class="keywordflow">if</span> (d == NULL)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;     <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;   d-&gt;<a class="code" href="structbufr__descriptor.html#ae5fc8cc8c4fec13e32888195b446e2b2">f</a> = <span class="keywordtype">id</span> / 100000;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;   d-&gt;<a class="code" href="structbufr__descriptor.html#a0d74f3d40ccd04265efa0e76107b6484">x</a> = (<span class="keywordtype">id</span> % 100000) / 1000;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   d-&gt;<a class="code" href="structbufr__descriptor.html#a7d2d4376a2a37032ab790ec0a92216cc">y</a> = <span class="keywordtype">id</span> % 1000;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   sprintf(d-&gt;<a class="code" href="structbufr__descriptor.html#af905f9ead0592ec65d3ecb3a3dbe057d">c</a>, <span class="stringliteral">&quot;%06d&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div>
<div class="ttc" id="structbufr__descriptor_html_ae5fc8cc8c4fec13e32888195b446e2b2"><div class="ttname"><a href="structbufr__descriptor.html#ae5fc8cc8c4fec13e32888195b446e2b2">bufr_descriptor::f</a></div><div class="ttdeci">unsigned char f</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00263">bufr2syn.h:263</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_af905f9ead0592ec65d3ecb3a3dbe057d"><div class="ttname"><a href="structbufr__descriptor.html#af905f9ead0592ec65d3ecb3a3dbe057d">bufr_descriptor::c</a></div><div class="ttdeci">char c[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00266">bufr2syn.h:266</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_a7d2d4376a2a37032ab790ec0a92216cc"><div class="ttname"><a href="structbufr__descriptor.html#a7d2d4376a2a37032ab790ec0a92216cc">bufr_descriptor::y</a></div><div class="ttdeci">unsigned char y</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00265">bufr2syn.h:265</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_a0d74f3d40ccd04265efa0e76107b6484"><div class="ttname"><a href="structbufr__descriptor.html#a0d74f3d40ccd04265efa0e76107b6484">bufr_descriptor::x</a></div><div class="ttdeci">unsigned char x</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00264">bufr2syn.h:264</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph" id="bufr2syn__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph">
<area shape="rect" id="node3" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="197,5,248,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aca5951fa477d55a17c610f7c10cdd18a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int three_bytes_to_uint </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the integer value from an array of three bytes, most significant first </p>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00031">31</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2syn__io_8c_source.html#l00034">read_bufr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;   <span class="keywordflow">return</span>  (source[2] + source[1] * 256 + source[0] * 65536);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" id="bufr2syn__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph">
<area shape="rect" id="node3" href="bufr2syn__io_8c.html#a79a14be80c1bb9a8037ceaa77e299f65" title="read a bufr file as an array of unsigned chars " alt="" coords="190,5,266,32"/><area shape="rect" id="node5" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="315,5,365,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4ef4777dfa46d3929577005a97abc3f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tokenize_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tk</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ntk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>blanks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split the report string into tokens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tk</td><td>array of strings. Memory have to be allocated previously by caller </td></tr>
    <tr><td class="paramname">ntk</td><td>max amount of elements in tk array. </td></tr>
    <tr><td class="paramname">target</td><td>string which is the report to split </td></tr>
    <tr><td class="paramname">len</td><td>lenght of <em>target</em> string </td></tr>
    <tr><td class="paramname">blanks</td><td>string with the character considered as blanks. If null the default " =\n\r\v\t" is considered Returns the number of tokens <em>target</em> has been splitted into. Retuns 0 in case of a void or too large target. NOTE: <em>target</em> is changed after calling this routine. In fact, the pointers in <em>tk</em>[] are linking to some char in string <em>target</em> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00096">96</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2syn__utils_8c_source.html#l00305">guess_gts_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">size_t</span> i = 1, n;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordtype">char</span> d[] = <span class="stringliteral">&quot; =\n\r\v\t&quot;</span>, *b, *aux;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// set the blanks array</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (blanks == NULL) </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    b = &amp;d[0];</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    b = blanks;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// check target string limits </span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  n = strlen(target);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">if</span> (n == 0 || n &gt; len)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// the split loop </span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  tk[0] = strtok_r(target, b, &amp;aux);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">while</span> (i &lt; ntk &amp;&amp;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         ((tk[i] = strtok_r(NULL, b, &amp;aux)) != NULL ) &amp;&amp;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         strlen(tk[i]) &gt; 2 &amp;&amp;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;         strlen(tk[i]) &lt; 10)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    i++;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">if</span> (i &lt; ntk)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> ntk - 1;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" id="bufr2syn__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph">
<area shape="rect" id="node3" href="bufr2syn__utils_8c.html#a1432202487dc3d91032202440d793694" title="Guess the WMO GTS header from filename. " alt="" coords="163,5,288,32"/><area shape="rect" id="node5" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="336,5,387,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaeb0b1348d967dccdf492c088172e36a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int YYYYMMDDHHmm_to_met_datetime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the string YYYYMMDDHHmm and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>string with date in YYYYMMDDHHmm format </td></tr>
    <tr><td class="paramname">t</td><td>pointer to a struct <a class="el" href="structmet__datetime.html">met_datetime</a> where to set the results </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2syn__utils_8c_source.html#l00131">131</a> of file <a class="el" href="bufr2syn__utils_8c_source.html">bufr2syn_utils.c</a>.</p>

<p>References <a class="el" href="bufr2syn_8h_source.html#l00347">met_datetime::datime</a>, <a class="el" href="bufr2syn_8h_source.html#l00345">met_datetime::t</a>, and <a class="el" href="bufr2syn_8h_source.html#l00346">met_datetime::tim</a>.</p>

<p>Referenced by <a class="el" href="bufr2syn__buoy_8c_source.html#l00071">parse_subset_as_buoy()</a>, and <a class="el" href="bufr2syn__synop_8c_source.html#l00149">parse_subset_as_synop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span> (strlen(source) != 12)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  memset ( &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>, 0, sizeof ( <span class="keyword">struct</span> tm ) );</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  strptime (source, <span class="stringliteral">&quot;%Y%m%d%H%M&quot;</span>, &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  strcpy(t-&gt;<a class="code" href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">datime</a>, source);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  t-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> = mktime(&amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;} </div>
<div class="ttc" id="structmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00345">bufr2syn.h:345</a></div></div>
<div class="ttc" id="structmet__datetime_html_ac3b81071a1f25ef80443673c74c0167d"><div class="ttname"><a href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">met_datetime::tim</a></div><div class="ttdeci">struct tm tim</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00346">bufr2syn.h:346</a></div></div>
<div class="ttc" id="structmet__datetime_html_aa00faf24bdab309c3086b8288e0f198d"><div class="ttname"><a href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">met_datetime::datime</a></div><div class="ttdeci">char datime[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufr2syn_8h_source.html#l00347">bufr2syn.h:347</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2syn__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph.png" border="0" usemap="#bufr2syn__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" alt=""/></div>
<map name="bufr2syn__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" id="bufr2syn__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph">
<area shape="rect" id="node3" href="bufr2syn__buoy_8c.html#a0ead25d81eb64a65e61fcc77ceae0285" title="parse_subset_as_buoy" alt="" coords="243,5,394,32"/><area shape="rect" id="node9" href="bufr2syn__synop_8c.html#a2fb7360821d4a5b604f5a1a54d94e4a0" title="parse_subset_as_synop" alt="" coords="240,56,397,83"/><area shape="rect" id="node5" href="bufr2syn__sqparse_8c.html#a7e093a8faf8eb358ee8913479497f7fc" title="parse_subset_sequence" alt="" coords="446,31,605,57"/><area shape="rect" id="node7" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="the standard C main entry function " alt="" coords="653,31,704,57"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>

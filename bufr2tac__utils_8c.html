<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>bufr2synop: src/libraries/bufr2tac_utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bufr2synop
   &#160;<span id="projectnumber">0.8.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_588cd77586230d2c129f15f0bca2b9b2.html">libraries</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bufr2tac_utils.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>file with the utility routines for binary bufr2tac  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bufr2tac_8h_source.html">bufr2tac.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bufr2tac_utils.c:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c__incl.png" border="0" usemap="#src_2libraries_2bufr2tac__utils_8c" alt=""/></div>
<map name="src_2libraries_2bufr2tac__utils_8c" id="src_2libraries_2bufr2tac__utils_8c">
<area shape="rect" id="node2" href="bufr2tac_8h.html" title="bufr2tac.h" alt="" coords="450,95,529,121"/>
<area shape="rect" id="node10" href="bufrdeco_8h.html" title="Include header file for bufrdeco library. " alt="" coords="344,169,427,196"/>
<area shape="rect" id="node12" href="metsynop_8h.html" title="Main header file for synop related tasks. " alt="" coords="603,169,690,196"/>
<area shape="rect" id="node14" href="metbuoy_8h.html" title="Main header file for buoy related tasks. " alt="" coords="820,169,900,196"/>
<area shape="rect" id="node15" href="mettemp_8h.html" title="Main header file for temp report related tasks. " alt="" coords="714,169,795,196"/>
<area shape="rect" id="node16" href="metclimat_8h.html" title="metclimat.h" alt="" coords="925,169,1011,196"/>
<area shape="rect" id="node13" href="metcommon_8h.html" title="Main header file for common report structures. " alt="" coords="703,244,806,271"/>
</map>
</div>
</div>
<p><a href="bufr2tac__utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aca5951fa477d55a17c610f7c10cdd18a"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#aca5951fa477d55a17c610f7c10cdd18a">three_bytes_to_uint</a> (const unsigned char *source)</td></tr>
<tr class="memdesc:aca5951fa477d55a17c610f7c10cdd18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the integer value from an array of three bytes, most significant first  <a href="#aca5951fa477d55a17c610f7c10cdd18a">More...</a><br /></td></tr>
<tr class="separator:aca5951fa477d55a17c610f7c10cdd18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4beba3db514cc374360aa9042ad482"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a3d4beba3db514cc374360aa9042ad482">integer_to_descriptor</a> (struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *d, int id)</td></tr>
<tr class="memdesc:a3d4beba3db514cc374360aa9042ad482"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse an integer with a descriptor fom bufr ECWMF libary  <a href="#a3d4beba3db514cc374360aa9042ad482">More...</a><br /></td></tr>
<tr class="separator:a3d4beba3db514cc374360aa9042ad482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeedbf3464b812e1d69314bbb1128acf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#adeedbf3464b812e1d69314bbb1128acf">descriptor_to_integer</a> (int *id, struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *d)</td></tr>
<tr class="memdesc:adeedbf3464b812e1d69314bbb1128acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse a descriptor and sets an integer in the decimal formas fxxyyy  <a href="#adeedbf3464b812e1d69314bbb1128acf">More...</a><br /></td></tr>
<tr class="separator:adeedbf3464b812e1d69314bbb1128acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942da547fb750f611eee926a86726620"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a942da547fb750f611eee926a86726620">get_flag_value</a> (uint8_t width, uint8_t index)</td></tr>
<tr class="separator:a942da547fb750f611eee926a86726620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a956ace90c24f7bf3a0d9cf842ee4e89c">charray_to_string</a> (char *s, unsigned char *buf, size_t size)</td></tr>
<tr class="memdesc:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a null termitated c-string from an array of unsigned chars  <a href="#a956ace90c24f7bf3a0d9cf842ee4e89c">More...</a><br /></td></tr>
<tr class="separator:a956ace90c24f7bf3a0d9cf842ee4e89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2876bb9983e34caf17a366a41e25ce9b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a2876bb9983e34caf17a366a41e25ce9b">adjust_string</a> (char *s)</td></tr>
<tr class="memdesc:a2876bb9983e34caf17a366a41e25ce9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Supress trailing blanks of a string.  <a href="#a2876bb9983e34caf17a366a41e25ce9b">More...</a><br /></td></tr>
<tr class="separator:a2876bb9983e34caf17a366a41e25ce9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef4777dfa46d3929577005a97abc3f6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a> (char *tk[], size_t ntk, char *target, size_t len, char *blanks)</td></tr>
<tr class="memdesc:a4ef4777dfa46d3929577005a97abc3f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split the report string into tokens.  <a href="#a4ef4777dfa46d3929577005a97abc3f6">More...</a><br /></td></tr>
<tr class="separator:a4ef4777dfa46d3929577005a97abc3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb0b1348d967dccdf492c088172e36a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#aaeb0b1348d967dccdf492c088172e36a">YYYYMMDDHHmm_to_met_datetime</a> (struct <a class="el" href="structmet__datetime.html">met_datetime</a> *t, const char *source)</td></tr>
<tr class="memdesc:aaeb0b1348d967dccdf492c088172e36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the string YYYYMMDDHHmm[ss] and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>.  <a href="#aaeb0b1348d967dccdf492c088172e36a">More...</a><br /></td></tr>
<tr class="separator:aaeb0b1348d967dccdf492c088172e36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55723bd7e721338efb8090ba309906fa"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a55723bd7e721338efb8090ba309906fa">met_datetime_to_YYGG</a> (char *target, struct <a class="el" href="structmet__datetime.html">met_datetime</a> *t)</td></tr>
<tr class="memdesc:a55723bd7e721338efb8090ba309906fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get YYGG from a struct <a class="el" href="structmet__datetime.html">met_datetime</a>.  <a href="#a55723bd7e721338efb8090ba309906fa">More...</a><br /></td></tr>
<tr class="separator:a55723bd7e721338efb8090ba309906fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22cff10c1bb64730fad9765ef9c329c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#ab22cff10c1bb64730fad9765ef9c329c">round_met_datetime_to_hour</a> (struct <a class="el" href="structmet__datetime.html">met_datetime</a> *target, struct <a class="el" href="structmet__datetime.html">met_datetime</a> *source)</td></tr>
<tr class="separator:ab22cff10c1bb64730fad9765ef9c329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ba2ec7a3f9fa7cf392f0d500042b84"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a63ba2ec7a3f9fa7cf392f0d500042b84">guess_WMO_region</a> (char *A1, char *Reg, const char *II, const char *iii)</td></tr>
<tr class="memdesc:a63ba2ec7a3f9fa7cf392f0d500042b84"><td class="mdescLeft">&#160;</td><td class="mdescRight">get WMO region A1 and Reg items from II and iii (WMO index)  <a href="#a63ba2ec7a3f9fa7cf392f0d500042b84">More...</a><br /></td></tr>
<tr class="separator:a63ba2ec7a3f9fa7cf392f0d500042b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ef46e3b3a4233f83a9e8025208bd80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a13ef46e3b3a4233f83a9e8025208bd80">check_date_from_future</a> (struct <a class="el" href="structmetreport.html">metreport</a> *m)</td></tr>
<tr class="memdesc:a13ef46e3b3a4233f83a9e8025208bd80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check a estructure <a class="el" href="structmetreport.html">metreport</a> not from future.  <a href="#a13ef46e3b3a4233f83a9e8025208bd80">More...</a><br /></td></tr>
<tr class="separator:a13ef46e3b3a4233f83a9e8025208bd80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1432202487dc3d91032202440d793694"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a1432202487dc3d91032202440d793694">guess_gts_header</a> (struct <a class="el" href="structgts__header.html">gts_header</a> *h, const char *f)</td></tr>
<tr class="memdesc:a1432202487dc3d91032202440d793694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guess the WMO GTS header from filename.  <a href="#a1432202487dc3d91032202440d793694">More...</a><br /></td></tr>
<tr class="separator:a1432202487dc3d91032202440d793694"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>file with the utility routines for binary bufr2tac </p>

<p>Definition in file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2876bb9983e34caf17a366a41e25ce9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* adjust_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Supress trailing blanks of a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>string to process </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00099">99</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__x01_8c_source.html#l00119">buoy_parse_x01()</a>, <a class="el" href="bufr2tac__x01_8c_source.html#l00177">climat_parse_x01()</a>, <a class="el" href="bufr2tac__x01_8c_source.html#l00034">syn_parse_x01()</a>, and <a class="el" href="bufr2tac__x01_8c_source.html#l00237">temp_parse_x01()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordtype">size_t</span> l;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  l = strlen ( s );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">while</span> ( l &amp;&amp; s[--l] == <span class="charliteral">&#39; &#39;</span> )</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    s[l] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph" id="bufr2tac__utils_8c_a2876bb9983e34caf17a366a41e25ce9b_icgraph">
<area shape="rect" id="node2" href="bufr2tac__x01_8c.html#a5212280b7ff69cb2b4638650fc2ed238" title="Parse a expanded descriptor with X = 01. " alt="" coords="151,5,267,32"/>
<area shape="rect" id="node8" href="bufr2tac__x01_8c.html#ad365ebf101bf7efa3ee0dd058ec653c2" title="Parse a expanded descriptor with X = 01. " alt="" coords="148,56,271,83"/>
<area shape="rect" id="node10" href="bufr2tac__x01_8c.html#a7e01ae6b0c895b8a3e3a7d3d7051cf24" title="Parse a expanded descriptor with X = 01. " alt="" coords="155,107,263,133"/>
<area shape="rect" id="node12" href="bufr2tac__x01_8c.html#ab4e7de2f03b6acb22c5d9641e737db44" title="Parse a expanded descriptor with X = 01. " alt="" coords="151,157,268,184"/>
<area shape="rect" id="node3" href="bufr2tac__buoy_8c.html#ad8bb92861ee8db76f664f8fa8923a099" title="parse_subset_as_buoy" alt="" coords="322,5,473,32"/>
<area shape="rect" id="node4" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="524,81,683,108"/>
<area shape="rect" id="node5" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="731,45,884,86"/>
<area shape="rect" id="node7" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="782,111,833,137"/>
<area shape="rect" id="node6" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="932,52,983,79"/>
<area shape="rect" id="node9" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title="parse_subset_as_climat" alt="" coords="319,56,476,83"/>
<area shape="rect" id="node11" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report ..." alt="" coords="319,107,475,133"/>
<area shape="rect" id="node13" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title="parse_subset_as_temp" alt="" coords="322,157,473,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a956ace90c24f7bf3a0d9cf842ee4e89c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* charray_to_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get a null termitated c-string from an array of unsigned chars </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>resulting string </td></tr>
    <tr><td class="paramname">buf</td><td>pointer to first element in array </td></tr>
    <tr><td class="paramname">size</td><td>number of chars in array </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00085">85</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00136">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// copy</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  memcpy ( s , buf, size );</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// add final string mark</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  s[size] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph" id="bufr2tac__utils_8c_a956ace90c24f7bf3a0d9cf842ee4e89c_icgraph">
<area shape="rect" id="node2" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="172,5,223,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a13ef46e3b3a4233f83a9e8025208bd80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_date_from_future </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmetreport.html">metreport</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check a estructure <a class="el" href="structmetreport.html">metreport</a> not from future. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>pointer to a struct metreport to check about date and time</td></tr>
  </table>
  </dd>
</dl>
<p>It resturns 1 if date/time is from future, and likely wrong Returns 0 otherwise </p>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00292">292</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="metcommon_8h_source.html#l00049">met_datetime::t</a>, and <a class="el" href="bufr2tac_8h_source.html#l00273">metreport::t</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__climat_8c_source.html#l00038">parse_subset_as_climat()</a>, and <a class="el" href="bufr2tac__synop_8c_source.html#l00095">parse_subset_as_synop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  time_t now;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  now = time ( NULL );</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span> ( m-&gt;<a class="code" href="structmetreport.html#abb498d9c9d264c4150820c3d984ec45f">t</a>.<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> &gt; ( now + 1800 ) ) <span class="comment">// Still 1/2 hour courtesy</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="ttc" id="structmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00049">metcommon.h:49</a></div></div>
<div class="ttc" id="structmetreport_html_abb498d9c9d264c4150820c3d984ec45f"><div class="ttname"><a href="structmetreport.html#abb498d9c9d264c4150820c3d984ec45f">metreport::t</a></div><div class="ttdeci">struct met_datetime t</div><div class="ttdef"><b>Definition:</b> <a href="bufr2tac_8h_source.html#l00273">bufr2tac.h:273</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph" id="bufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph">
<area shape="rect" id="node2" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title="parse_subset_as_climat" alt="" coords="212,17,369,43"/>
<area shape="rect" id="node7" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report ..." alt="" coords="213,67,369,94"/>
<area shape="rect" id="node3" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="417,42,576,69"/>
<area shape="rect" id="node4" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="624,5,777,47"/>
<area shape="rect" id="node6" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="675,71,726,98"/>
<area shape="rect" id="node5" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="825,13,876,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adeedbf3464b812e1d69314bbb1128acf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int descriptor_to_integer </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse a descriptor and sets an integer in the decimal formas fxxyyy </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>pointer to target integer </td></tr>
    <tr><td class="paramname">d</td><td>pointer to a struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> with the source </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00058">58</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="bufrdeco_8h_source.html#l00241">bufr_descriptor::f</a>, <a class="el" href="bufrdeco_8h_source.html#l00242">bufr_descriptor::x</a>, and <a class="el" href="bufrdeco_8h_source.html#l00243">bufr_descriptor::y</a>.</p>

<p>Referenced by <a class="el" href="bufrtotac__io_8c_source.html#l00138">bufrdeco_parse_subset_sequence()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span> ( d == NULL )</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  *<span class="keywordtype">id</span> = 100000 * d-&gt;<a class="code" href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">f</a> + 1000 * d-&gt;<a class="code" href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">x</a> + d-&gt;<a class="code" href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">y</a>; </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="ttc" id="structbufr__descriptor_html_aa86bfd702067eca32ea3266fc0a27ad8"><div class="ttname"><a href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">bufr_descriptor::y</a></div><div class="ttdeci">uint8_t y</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00243">bufrdeco.h:243</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_a10c6cde4791d3f4721df491db0092b56"><div class="ttname"><a href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">bufr_descriptor::x</a></div><div class="ttdeci">uint8_t x</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00242">bufrdeco.h:242</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_ae9e66859d27018f2de3bc31f21c75c4e"><div class="ttname"><a href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">bufr_descriptor::f</a></div><div class="ttdeci">uint8_t f</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00241">bufrdeco.h:241</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph" id="bufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph">
<area shape="rect" id="node2" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="195,5,348,47"/>
<area shape="rect" id="node3" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="396,13,447,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a942da547fb750f611eee926a86726620"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_flag_value </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00066">66</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span> (width == index)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> (uint32_t) 1;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (width &lt; index)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> (uint32_t) 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (width &lt;= 32)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> (((uint32_t) 1) &lt;&lt; (width - index));</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> (uint32_t) 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1432202487dc3d91032202440d793694"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int guess_gts_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgts__header.html">gts_header</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guess the WMO GTS header from filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>pointer to a struct <a class="el" href="structgts__header.html">gts_header</a> where to set the results </td></tr>
    <tr><td class="paramname">f</td><td>pathname of bufrfile</td></tr>
  </table>
  </dd>
</dl>
<p>It returns 1 if guessed, 0 otherwise</p>
<pre>
This routine assume the filename format of a bufr file is</pre><pre>  YYYYMMDDHHmmss_BULLNN_ICAO_YYGGgg_ORD.bufr</pre><pre>where</pre><pre> YYYYMMDDHHmmss</pre><pre>is the timestamp (UTC) of the file in GTS (as example, in NOAA gateway)</pre><pre>BULLNN is the bulletin identifier in GTS. It is a six chars lenght in the form T1 T2 A1 A2 N1 N2</pre><pre>  For observations, T1 is 'I'
  Possible values of T2 for T1 = 'I' are
     O   Oceanographic/limnographic (water properties)
     P   Pictorial
     S   Surface/sea level
     T   Text (plain language information)
     U   Upper air
     X   Other data types
     Z   Mixed data types</pre><pre>  For T1T2 = 'IS' Then A1:</pre><pre>     IS A 01–29 Routinely scheduled observations for n/a 000/006
                distribution from automatic (fixed or mobile)
                land stations (e.g. 0000, 0100, … or 0220, 0240,
                0300, …, or 0715, 0745, ... UTC)
     IS A 30–59 N-minute observations from automatic (fixed n/a 000/007
                or mobile) land stations
     IS B   Radar reports (parts A and B) RADOB 006/003
     IS C 01–45 Climatic observations from land stations CLIMAT 000/020
     IS C 46–59 Climatic observations from marine stations CLIMAT SHIP 001/0202009 edition
                ATTACHmENT II-5 I
     IS D   Radiological observation RADREP 010/001
     IS E   Ozone measurement at surface n/a 008/000
     IS F   Source of atmospherics SFAZI, SFLOC, SFAZU 000/030
     IS I 01–45 Intermediate synoptic observations from fixed SYNOP (SIxx) 000/001
            land stations 000/051
     IS I 46–59 Intermediate synoptic observations from mobile SYNOP mOBIL 000/004
            land stations
     IS M 01–45 Main synoptic observations from fixed land SYNOP (SMxx) 000/002
            stations 000/052
     IS M 46–59 Main synoptic observations from mobile land SYNOP mOBIL 000/005
             stations
     IS N 01–45 Synoptic observations from fixed land stations SYNOP (SNxx) 000/000
            at non-standard time (i.e. 0100, 0200, 0400,   000/050
            0500, ... UTC)
     IS N 46–59 Synoptic observations from mobile land stations SYNOP mOBIL 000/003
            at non-standard time (i.e. 0100, 0200, 0400,
            0500, ... UTC)
     IS R   Hydrologic reports HYDRA 000/040
     IS S 01–19 Synoptic observations from marine stations SHIP 001/000
     IS S 20–39 One-hour observations from automatic marine n/a 001/006
           stations
     IS S 40–59 N-minute observations from automatic marine n/a 001/007
           stations
     IS T 01–19 Tide gauge observations n/a 001/030
     IS T 20–39 Observed water level time series n/a 001/031
     IS V   Special aeronautical observations (SPECI) SPECI 000/011
     IS W   Aviation routine weather observations (mETAR) mETAR 000/010
     IS X   Other surface data IAC, IAC FLEET</pre><pre>  For T1T2 = 'IU'  then A1:
     IU A   Single level aircraft reports (automatic) AmDAR 004/000
     IU A   Single level aircraft reports (manual) AIREP/PIREP 004/001
     IU B   Single level balloon reports n/a
     IU C   (used for single level satellite-derived SAREP/SATOB 005/000
             reports – see Note 3)
     IU D   Dropsonde/Dropwindsondes TEmP DROP 002/007
     IU E   Ozone vertical sounding n/a 008/001
     IU I   Dispersal and transport analysis n/a 009/000
     IU J 01–19 Upper wind from fixed land stations (entire PILOT (parts A, 002/001
            sounding) B, C, D)
     IU J 20–39 Upper wind from mobile land stations (entire PILOT mOBIL 002/003
            sounding) (parts A, B, C, D)
     IU J 40–59 Upper wind from marine stations (entire PILOT SHIP 002/002
           sounding) (parts A, B, C, D)
     IU K 01–19 Radio soundings from fixed land stations TEmP (parts A, B) 002/004
           (up to 100 hPa)
     IU K 20–39 Radio soundings from mobile land stations TEmP mOBIL 002/006
          (up to 100 hPa) (parts A, B)
     IU K 40–59 Radio soundings from marine stations TEmP SHIP (parts A, B) 002/005
           (up to 100 hPa)
     IU M   Model derived sondes
     IU N   Rocketsondes
     IU O   Profiles of aircraft observations in ascending/ AmDAR 002/020
            descending
     IU P   Profilers PILOT 002/010
     IU Q   RASS temperature profilers TEmP 002/011
     IU R   (used for radiance data – see Note 3)
     IU S   01–19 Radiosondes/pibal reports from fixed land TEmP (parts A, B, C, D) 002/004
             stations (entire sounding)
     IU S 20–39 Radio soundings from mobile land stations TEmP mOBIL (parts A, 002/006
             (entire sounding) B, C, D)
     IU S 40–59 Radio soundings from marine stations TEmP SHIP (parts A, 002/005
             (entire sounding) B, C, D)
     IU T   (used for satellite-derived sondes – see Note 3) SATEm, SARAD, SATOB
     IU U 01–45 Monthly statistics of data from upper-air stations CLImAT TEmP 002/025
     IU U 46–59 Monthly statistics of data from marine stations CLImAT TEmP, SHIP 002/026
     IU W 01–19 Upper wind from fixed land stations (up to PILOT (parts A, B) 002/001
             100 hPa)
     IU W 20–39 Upper wind from mobile land stations (up to PILOT mOBIL 002/003
             100 hPa) (parts A, B)
     IU W 40–59 Upper wind from marine stations (up to PILOT SHIP 002/002
             100 hPa) (parts A, B)
     IU X   Other upper-air reports</pre><pre>  for T1T2 = 'IO' then  A1:
     IO B   Buoy observations BUOY 001/025
     IO I   Sea ice
     IO P   Sub-surface profiling floats TESAC 031/004
     IO R   Sea surface observations TRACKOB 031/001
     IO S   Sea surface and below soundings BATHY, TESAC 031/005
     IO T   Sea surface temperature
     IO W   Sea surface waves WAVEOB 031/002
     IO X   Other sea environmental</pre><pre>  About A2
     A   0 - 90W northern hemisphere
     B   90W - 180 northern hemisphere
     C   180 - 90E northern hemisphere
     D   90E - 0 northern hemisphere
     E   0 - 90W tropical belt
     F   90W - 180 tropical belt
     G   180 - 90E tropical belt
     H   90E - 0 tropical belt
     I   0 - 90W southern hemisphere
     J   90W - 180 southern hemisphere
     K   180 - 90E southern hemisphere
     L   90E - 0 southern hemisphere
     M   Lower left 10S 100E/upper right 70N 110W
     N   Northern hemisphere
     P   Area between 64.69N - 136.76W, 55.61N - 13.43W
     64.69N - 156.76W, 55.61N - 33.43W
     S   Southern hemisphere
     T   45W - 180 northern hemisphere
     U   Area between 21.0N - 128.1W, 36.0N - 130.9W
               21.1N - 113.0W, 36.2N - 110.5W
     V   Area between 30.3N - 83.7W, 51.0N - 68.9W
               19.8N - 64.5W, 33.3N - 47.1W
     X   Global Area (area not definable)</pre><pre> ICAO is the ICAO index for release center.</pre><pre> YYGGgg is the nominal release time (day, hour, minute) UTC</pre><pre> ORD is the order sequence as RRA, RRB, CCA .... is optional
</pre> 
<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00466">466</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="bufrdeco_8h_source.html#l00388">gts_header::bname</a>, <a class="el" href="bufrdeco_8h_source.html#l00389">gts_header::center</a>, <a class="el" href="bufrdeco_8h_source.html#l00390">gts_header::dtrel</a>, <a class="el" href="bufrdeco_8h_source.html#l00392">gts_header::filename</a>, <a class="el" href="bufrdeco_8h_source.html#l00391">gts_header::order</a>, <a class="el" href="bufrdeco_8h_source.html#l00393">gts_header::timestamp</a>, and <a class="el" href="bufr2tac__utils_8c_source.html#l00121">tokenize_string()</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00136">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;{</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordtype">size_t</span> nt;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">char</span> aux[256], *tk[16], *c;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// parse file name</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  strcpy ( h-&gt;<a class="code" href="structgts__header.html#a69fa455b4bed72c1ff91ec6e399ca965">filename</a>, f );</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  strcpy ( aux, f );</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// check latest &#39;/&#39; in filename</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">if</span> ( ( c = strrchr ( aux,<span class="charliteral">&#39;/&#39;</span> ) ) == NULL )</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    c = &amp;aux[0];</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    c++;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  nt = <a class="code" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a> ( tk, 16, c, strlen ( c ), <span class="stringliteral">&quot;_. &quot;</span> );</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// parse filenames with format as example &#39;AAAAMMDDHHmmss_ISIE06_SBBR_012100_RRB.bufr&#39;</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// 5 or 6 items</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> ( nt &lt; 5 || nt &gt; 6 )</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// extension bufr</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> ( strcmp ( tk[nt - 1],<span class="stringliteral">&quot;bufr&quot;</span> ) )</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// item 0 the timestamp of file in NOAA GTS gateway</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">if</span> ( strlen ( tk[0] ) != 14 || strspn ( tk[0], <span class="stringliteral">&quot;0123456789&quot;</span> ) != 14 )</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  strcpy ( h-&gt;<a class="code" href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">timestamp</a>, tk[0] );</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// item 1</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">if</span> ( strlen ( tk[1] ) != 6 || strspn ( &amp;tk[1][4],<span class="stringliteral">&quot;0123456789&quot;</span> ) != 2 )</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  strcpy ( h-&gt;<a class="code" href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">bname</a>, tk[1] );</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// item 2</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> ( strlen ( tk[2] ) != 4 )</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  strcpy ( h-&gt;<a class="code" href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">center</a>, tk[2] );</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> ( strlen ( tk[3] ) != 6 || strspn ( tk[3], <span class="stringliteral">&quot;0123456789&quot;</span> ) != 6 )</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  strcpy ( h-&gt;<a class="code" href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">dtrel</a>, tk[3] );</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> ( nt == 5 )</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      strcpy ( h-&gt;<a class="code" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, <span class="stringliteral">&quot;BBB&quot;</span> );</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> ( strlen ( tk[4] ) == 3 )</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        strcpy ( h-&gt;<a class="code" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, tk[4] );</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div><div class="ttc" id="structgts__header_html_ab4f0ca0892d074656af878e227d802b0"><div class="ttname"><a href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">gts_header::timestamp</a></div><div class="ttdeci">char timestamp[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00393">bufrdeco.h:393</a></div></div>
<div class="ttc" id="structgts__header_html_a4b7aa0549fd269b056c6338343d29f12"><div class="ttname"><a href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">gts_header::order</a></div><div class="ttdeci">char order[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00391">bufrdeco.h:391</a></div></div>
<div class="ttc" id="structgts__header_html_a5a3261f82bdb971a89402298f58c0d54"><div class="ttname"><a href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">gts_header::bname</a></div><div class="ttdeci">char bname[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00388">bufrdeco.h:388</a></div></div>
<div class="ttc" id="bufr2tac__utils_8c_html_a4ef4777dfa46d3929577005a97abc3f6"><div class="ttname"><a href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a></div><div class="ttdeci">size_t tokenize_string(char *tk[], size_t ntk, char *target, size_t len, char *blanks)</div><div class="ttdoc">Split the report string into tokens. </div><div class="ttdef"><b>Definition:</b> <a href="bufr2tac__utils_8c_source.html#l00121">bufr2tac_utils.c:121</a></div></div>
<div class="ttc" id="structgts__header_html_a242f2fa9672b22db631d592283a8ae30"><div class="ttname"><a href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">gts_header::center</a></div><div class="ttdeci">char center[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00389">bufrdeco.h:389</a></div></div>
<div class="ttc" id="structgts__header_html_a2d6cac95fb647c857f524ba1b957de4e"><div class="ttname"><a href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">gts_header::dtrel</a></div><div class="ttdeci">char dtrel[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00390">bufrdeco.h:390</a></div></div>
<div class="ttc" id="structgts__header_html_a69fa455b4bed72c1ff91ec6e399ca965"><div class="ttname"><a href="structgts__header.html#a69fa455b4bed72c1ff91ec6e399ca965">gts_header::filename</a></div><div class="ttdeci">char filename[256]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00392">bufrdeco.h:392</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph.png" border="0" usemap="#bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph" id="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph">
<area shape="rect" id="node2" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6" title="Split the report string into tokens. " alt="" coords="180,5,288,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph" id="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph">
<area shape="rect" id="node2" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="180,5,231,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a63ba2ec7a3f9fa7cf392f0d500042b84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* guess_WMO_region </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>A1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>II</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>iii</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get WMO region A1 and Reg items from II and iii (WMO index) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A1</td><td>string woth resulting A1 </td></tr>
    <tr><td class="paramname">Reg</td><td>string with resulting Reg </td></tr>
    <tr><td class="paramname">II</td><td>WMO block number </td></tr>
    <tr><td class="paramname">iii</td><td>WMO number </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00211">211</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__synop_8c_source.html#l00069">guess_WMO_region_synop()</a>, <a class="el" href="bufr2tac__temp_8c_source.html#l00034">guess_WMO_region_temp()</a>, and <a class="el" href="bufr2tac__x01_8c_source.html#l00034">syn_parse_x01()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordtype">char</span> aux[8];</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// filter bad inputs</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> ( II == NULL || iii == NULL )</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> ( II[0] == 0 || iii[0] == 0 )</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// aux string</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  sprintf ( aux,<span class="stringliteral">&quot;%s%s&quot;</span>, II, iii );</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> ( ( II[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;042&quot;</span> ) != aux ) &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;043&quot;</span> ) != aux )  &amp;&amp;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         ( strstr ( aux,<span class="stringliteral">&quot;044&quot;</span> ) != aux )  &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;0858&quot;</span> ) != aux ) &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;0859&quot;</span> ) != aux ) ) ||</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;       II[0] == <span class="charliteral">&#39;1&#39;</span> || ( strstr ( aux,<span class="stringliteral">&quot;201&quot;</span> ) == aux ) ||</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;       strcmp ( II,<span class="stringliteral">&quot;22&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;26&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;27&quot;</span> ) == 0 ||</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;       strcmp ( II,<span class="stringliteral">&quot;33&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;34&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;22&quot;</span> ) == 0 ||</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;       ( strstr ( aux,<span class="stringliteral">&quot;201&quot;</span> ) == aux ) )</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">// Reg 6. Europe</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      A1[0] = <span class="charliteral">&#39;6&#39;</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;VI&quot;</span> );</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;6&#39;</span> || ( strstr ( aux,<span class="stringliteral">&quot;0858&quot;</span> ) == aux ) || ( strstr ( aux,<span class="stringliteral">&quot;0859&quot;</span> ) == aux ) )</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">// Reg 1. Africa</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      A1[0] = <span class="charliteral">&#39;1&#39;</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;I&quot;</span> );</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;5&#39;</span> || ( strcmp ( II,<span class="stringliteral">&quot;49&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;21&quot;</span> ) == 0 ) ||</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            ( strcmp ( II,<span class="stringliteral">&quot;23&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;24&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;25&quot;</span> ) == 0 ) ||</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            ( strcmp ( II,<span class="stringliteral">&quot;28&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;29&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;30&quot;</span> ) == 0 ) ||</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            ( strcmp ( II,<span class="stringliteral">&quot;31&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;32&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;38&quot;</span> ) == 0 ) ||</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            ( strcmp ( II,<span class="stringliteral">&quot;35&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;36&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;39&quot;</span> ) == 0 ) ||</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            ( strcmp ( aux, <span class="stringliteral">&quot;20200&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;20999&quot;</span> ) &lt;= 0 ) ||</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            ( strcmp ( aux, <span class="stringliteral">&quot;40000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;48599&quot;</span> ) &lt;= 0 ) ||</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            ( strcmp ( aux, <span class="stringliteral">&quot;48800&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;49999&quot;</span> ) &lt;= 0 ) )</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="comment">// Reg 2. Asia</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      A1[0] = <span class="charliteral">&#39;2&#39;</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;II&quot;</span> );</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strcmp ( aux, <span class="stringliteral">&quot;80000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;88999&quot;</span> ) &lt;= 0 )</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="comment">// Reg 3. South america</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      A1[0] = <span class="charliteral">&#39;3&#39;</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;III&quot;</span> );</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;7&#39;</span> || strstr ( aux,<span class="stringliteral">&quot;042&quot;</span> ) == aux ||</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            strstr ( aux,<span class="stringliteral">&quot;043&quot;</span> ) == aux  || strstr ( aux,<span class="stringliteral">&quot;044&quot;</span> ) == aux )</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="comment">// Reg 4. North and central america</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      A1[0] = <span class="charliteral">&#39;4&#39;</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;IV&quot;</span> );</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( strcmp ( aux, <span class="stringliteral">&quot;48600&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;48799&quot;</span> ) &lt;= 0 ) ||</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            ( strcmp ( aux, <span class="stringliteral">&quot;90000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;98999&quot;</span> ) &lt;= 0 ) )</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">// Reg 5. Pacific South</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      A1[0] = <span class="charliteral">&#39;5&#39;</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;V&quot;</span> );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strcmp ( II,<span class="stringliteral">&quot;89&quot;</span> ) == 0 )</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment">// Reg 0. Antarctica</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      A1[0] = <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      strcpy ( Reg,<span class="stringliteral">&quot;0&quot;</span> );</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">return</span> A1;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a63ba2ec7a3f9fa7cf392f0d500042b84_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a63ba2ec7a3f9fa7cf392f0d500042b84_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a63ba2ec7a3f9fa7cf392f0d500042b84_icgraph" id="bufr2tac__utils_8c_a63ba2ec7a3f9fa7cf392f0d500042b84_icgraph">
<area shape="rect" id="node2" href="bufr2tac__synop_8c.html#a991bb92aa7dea23bd60bf2c48020dbcd" title="Try to find WMO region if it is not already set and WMO Block and number index are known..." alt="" coords="192,5,371,32"/>
<area shape="rect" id="node3" href="bufr2tac__temp_8c.html#abe763e4931ff3be114a73a496978fdb2" title="guess_WMO_region_temp" alt="" coords="194,56,369,83"/>
<area shape="rect" id="node4" href="bufr2tac__x01_8c.html#a7e01ae6b0c895b8a3e3a7d3d7051cf24" title="Parse a expanded descriptor with X = 01. " alt="" coords="227,107,335,133"/>
<area shape="rect" id="node5" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report ..." alt="" coords="419,107,575,133"/>
<area shape="rect" id="node6" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="623,107,781,133"/>
<area shape="rect" id="node7" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="829,70,983,111"/>
<area shape="rect" id="node9" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="881,136,931,163"/>
<area shape="rect" id="node8" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1031,77,1081,104"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3d4beba3db514cc374360aa9042ad482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int integer_to_descriptor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse an integer with a descriptor fom bufr ECWMF libary </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>pointer to a struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> where to set the result on output </td></tr>
    <tr><td class="paramname">id</td><td>integer with the descriptor from ewcwf </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00041">41</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="bufrdeco_8h_source.html#l00244">bufr_descriptor::c</a>, <a class="el" href="bufrdeco_8h_source.html#l00241">bufr_descriptor::f</a>, <a class="el" href="bufrdeco_8h_source.html#l00242">bufr_descriptor::x</a>, and <a class="el" href="bufrdeco_8h_source.html#l00243">bufr_descriptor::y</a>.</p>

<p>Referenced by <a class="el" href="bufr2synop_8c_source.html#l00136">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">if</span> ( d == NULL )</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  d-&gt;<a class="code" href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">f</a> = <span class="keywordtype">id</span> / 100000;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  d-&gt;<a class="code" href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">x</a> = ( <span class="keywordtype">id</span> % 100000 ) / 1000;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  d-&gt;<a class="code" href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">y</a> = <span class="keywordtype">id</span> % 1000;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  sprintf ( d-&gt;<a class="code" href="structbufr__descriptor.html#af905f9ead0592ec65d3ecb3a3dbe057d">c</a>, <span class="stringliteral">&quot;%06d&quot;</span>, <span class="keywordtype">id</span> );</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div><div class="ttc" id="structbufr__descriptor_html_aa86bfd702067eca32ea3266fc0a27ad8"><div class="ttname"><a href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">bufr_descriptor::y</a></div><div class="ttdeci">uint8_t y</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00243">bufrdeco.h:243</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_af905f9ead0592ec65d3ecb3a3dbe057d"><div class="ttname"><a href="structbufr__descriptor.html#af905f9ead0592ec65d3ecb3a3dbe057d">bufr_descriptor::c</a></div><div class="ttdeci">char c[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00244">bufrdeco.h:244</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_a10c6cde4791d3f4721df491db0092b56"><div class="ttname"><a href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">bufr_descriptor::x</a></div><div class="ttdeci">uint8_t x</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00242">bufrdeco.h:242</a></div></div>
<div class="ttc" id="structbufr__descriptor_html_ae9e66859d27018f2de3bc31f21c75c4e"><div class="ttname"><a href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">bufr_descriptor::f</a></div><div class="ttdeci">uint8_t f</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00241">bufrdeco.h:241</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph" id="bufr2tac__utils_8c_a3d4beba3db514cc374360aa9042ad482_icgraph">
<area shape="rect" id="node2" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="195,5,245,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55723bd7e721338efb8090ba309906fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* met_datetime_to_YYGG </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get YYGG from a struct <a class="el" href="structmet__datetime.html">met_datetime</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>string with result as output </td></tr>
    <tr><td class="paramname">t</td><td>pointer to source struct <a class="el" href="structmet__datetime.html">met_datetime</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00180">180</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="metcommon_8h_source.html#l00049">met_datetime::t</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  time_t tx;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">struct </span>tm tim;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  </div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  tx = ((t-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> + 1800) / 3600) * 3600 ; <span class="comment">// rounding to next whole hour</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  memset (&amp;tim, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> tm));</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  gmtime_r(&amp;tx, &amp;tim);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  </div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  strftime(target, 8, <span class="stringliteral">&quot;%d%H&quot;</span>, &amp;tim);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    </div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> target;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="structmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00049">metcommon.h:49</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a55723bd7e721338efb8090ba309906fa_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a55723bd7e721338efb8090ba309906fa_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a55723bd7e721338efb8090ba309906fa_icgraph" id="bufr2tac__utils_8c_a55723bd7e721338efb8090ba309906fa_icgraph">
<area shape="rect" id="node2" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title="parse_subset_as_temp" alt="" coords="216,42,367,69"/>
<area shape="rect" id="node3" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="415,42,573,69"/>
<area shape="rect" id="node4" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="621,5,775,47"/>
<area shape="rect" id="node6" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="673,71,723,98"/>
<area shape="rect" id="node5" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="823,13,873,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab22cff10c1bb64730fad9765ef9c329c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int round_met_datetime_to_hour </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00194">194</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="metcommon_8h_source.html#l00051">met_datetime::datime</a>, <a class="el" href="metcommon_8h_source.html#l00049">met_datetime::t</a>, and <a class="el" href="metcommon_8h_source.html#l00050">met_datetime::tim</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  target-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> = ((source-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> + 1800) / 3600) * 3600 ; <span class="comment">// rounding to next whole hour</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  memset (&amp;target-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> tm));</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  gmtime_r(&amp;target-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a>, &amp;target-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  strftime ( target-&gt;<a class="code" href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">datime</a>, 16, <span class="stringliteral">&quot;%Y%m%d%H%M&quot;</span>, &amp;target-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="structmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00049">metcommon.h:49</a></div></div>
<div class="ttc" id="structmet__datetime_html_ac3b81071a1f25ef80443673c74c0167d"><div class="ttname"><a href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">met_datetime::tim</a></div><div class="ttdeci">struct tm tim</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00050">metcommon.h:50</a></div></div>
<div class="ttc" id="structmet__datetime_html_aa00faf24bdab309c3086b8288e0f198d"><div class="ttname"><a href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">met_datetime::datime</a></div><div class="ttdeci">char datime[16]</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00051">metcommon.h:51</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph" id="bufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph">
<area shape="rect" id="node2" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title="parse_subset_as_temp" alt="" coords="192,42,343,69"/>
<area shape="rect" id="node3" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="391,42,549,69"/>
<area shape="rect" id="node4" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="597,5,751,47"/>
<area shape="rect" id="node6" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="649,71,699,98"/>
<area shape="rect" id="node5" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="799,13,849,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aca5951fa477d55a17c610f7c10cdd18a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int three_bytes_to_uint </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the integer value from an array of three bytes, most significant first </p>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00030">30</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__io_8c_source.html#l00034">read_bufr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">return</span> ( source[2] + source[1] * 256 + source[0] * 65536 );</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" id="bufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph">
<area shape="rect" id="node2" href="bufr2tac__io_8c.html#a79a14be80c1bb9a8037ceaa77e299f65" title="read a bufr file as an array of unsigned chars " alt="" coords="184,5,260,32"/>
<area shape="rect" id="node3" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="308,5,359,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4ef4777dfa46d3929577005a97abc3f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tokenize_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tk</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ntk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>blanks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split the report string into tokens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tk</td><td>array of strings. Memory have to be allocated previously by caller </td></tr>
    <tr><td class="paramname">ntk</td><td>max amount of elements in tk array. </td></tr>
    <tr><td class="paramname">target</td><td>string which is the report to split </td></tr>
    <tr><td class="paramname">len</td><td>lenght of <em>target</em> string </td></tr>
    <tr><td class="paramname">blanks</td><td>string with the character considered as blanks. If null the default " =\n\r\v\t" is considered Returns the number of tokens <em>target</em> has been splitted into. Retuns 0 in case of a void or too large target. NOTE: <em>target</em> is changed after calling this routine. In fact, the pointers in <em>tk</em>[] are linking to some char in string <em>target</em> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00121">121</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__utils_8c_source.html#l00466">guess_gts_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">size_t</span> i = 1, n;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">char</span> d[] = <span class="stringliteral">&quot; =\n\r\v\t&quot;</span>, *b, *aux;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// set the blanks array</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> ( blanks == NULL )</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    b = &amp;d[0];</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    b = blanks;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// check target string limits</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  n = strlen ( target );</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> ( n == 0 || n &gt; len )</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// the split loop</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  tk[0] = strtok_r ( target, b, &amp;aux );</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">while</span> ( i &lt; ntk &amp;&amp;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          ( ( tk[i] = strtok_r ( NULL, b, &amp;aux ) ) != NULL ) &amp;&amp;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          strlen ( tk[i] ) &gt; 2 &amp;&amp;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          strlen ( tk[i] ) &lt; 10 )</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    i++;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> ( i &lt; ntk )</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> ntk - 1;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" id="bufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph">
<area shape="rect" id="node2" href="bufr2tac__utils_8c.html#a1432202487dc3d91032202440d793694" title="Guess the WMO GTS header from filename. " alt="" coords="161,5,288,32"/>
<area shape="rect" id="node3" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="336,5,387,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaeb0b1348d967dccdf492c088172e36a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int YYYYMMDDHHmm_to_met_datetime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the string YYYYMMDDHHmm[ss] and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>string with date in YYYYMMDDHHmm[ss] format </td></tr>
    <tr><td class="paramname">t</td><td>pointer to a struct <a class="el" href="structmet__datetime.html">met_datetime</a> where to set the results </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00156">156</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>

<p>References <a class="el" href="metcommon_8h_source.html#l00051">met_datetime::datime</a>, <a class="el" href="metcommon_8h_source.html#l00049">met_datetime::t</a>, and <a class="el" href="metcommon_8h_source.html#l00050">met_datetime::tim</a>.</p>

<p>Referenced by <a class="el" href="bufr2tac__buoy_8c_source.html#l00074">parse_subset_as_buoy()</a>, <a class="el" href="bufr2tac__climat_8c_source.html#l00038">parse_subset_as_climat()</a>, <a class="el" href="bufr2tac__synop_8c_source.html#l00095">parse_subset_as_synop()</a>, and <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">if</span> ( strlen ( source ) != 12  &amp;&amp; strlen ( source ) != 14 )</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  memset ( &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>, 0, sizeof ( <span class="keyword">struct</span> tm ) );</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> ( strlen ( source ) == 12 )</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      strptime ( source, <span class="stringliteral">&quot;%Y%m%d%H%M&quot;</span>, &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      strptime ( source, <span class="stringliteral">&quot;%Y%m%d%H%M%S&quot;</span>, &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  strcpy ( t-&gt;<a class="code" href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">datime</a>, source );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  t-&gt;<a class="code" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> = mktime ( &amp;t-&gt;<a class="code" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="ttc" id="structmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00049">metcommon.h:49</a></div></div>
<div class="ttc" id="structmet__datetime_html_ac3b81071a1f25ef80443673c74c0167d"><div class="ttname"><a href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">met_datetime::tim</a></div><div class="ttdeci">struct tm tim</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00050">metcommon.h:50</a></div></div>
<div class="ttc" id="structmet__datetime_html_aa00faf24bdab309c3086b8288e0f198d"><div class="ttname"><a href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">met_datetime::datime</a></div><div class="ttdeci">char datime[16]</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00051">metcommon.h:51</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph.png" border="0" usemap="#bufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" alt=""/></div>
<map name="bufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" id="bufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph">
<area shape="rect" id="node2" href="bufr2tac__buoy_8c.html#ad8bb92861ee8db76f664f8fa8923a099" title="parse_subset_as_buoy" alt="" coords="239,5,390,32"/>
<area shape="rect" id="node7" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title="parse_subset_as_climat" alt="" coords="236,56,393,83"/>
<area shape="rect" id="node8" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report ..." alt="" coords="237,107,393,133"/>
<area shape="rect" id="node9" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title="parse_subset_as_temp" alt="" coords="239,157,390,184"/>
<area shape="rect" id="node3" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset. " alt="" coords="441,81,600,108"/>
<area shape="rect" id="node4" href="bufrtotac__io_8c.html#a3baaf7cbcd5761ee638cfdc060f6f2da" title="bufrdeco_parse_subset\l_sequence" alt="" coords="648,45,801,86"/>
<area shape="rect" id="node6" href="bufr2synop_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="699,111,750,137"/>
<area shape="rect" id="node5" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="849,52,900,79"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
